##########ConfigFile##########
{
# DATA FORMAT
'rawdata_tier' : 'midas',

# DETECTOR
'geometry'  : 'lime',

# DEBUG plots
'debug_mode'            : 0,
'ev'                    : 5,
'nclu'                  : -1,        # -1

# Plots that will be made if debug_mode = 1

'flag_full_image'       : 0,
'flag_rebin_image'      : 1,
'flag_edges_image'      : 0,
'flag_polycluster'      : 1,
'flag_dbscan_seeds'     : 1,
'flag_stats'            : 0,

'camera_mode'            : 1,

# Parameters of the plots
'cmapcolor'             : 'gray',
'figsizeY'              : 12,
'figsizeX'              : 12,

# Setting environments parameters

'numPedEvents'          : -1,
'pedExclRegion'         : None,
'rebin'                 : 4,
'nsigma'                : 0.6,
'min_neighbors_average' : 1.2,                   # cut on the minimum average energy around a pixel (remove isolated macro-pixels)
'cimax'                 : 5000,                    # Upper threshold (keep very high not to kill large signals)
'justPedestal'          : False,
'daq'                   : 'midas',                 # DAQ type (btf/h5/midas)
'type'                  : 'neutrons',              # events type (beam/cosmics/neutrons)
'tag'                   : 'LNGS',                  # 'LNGS' for LIME LNGS experimental data, 'LNF' for all data taken at LNF, 'MAN' for all data taken at LNGS MANGO, 'MC$path_to_histogram.root' for MC. 
						   # An example for MC tag could be (see configFile_MC.txt) 'MC$digitized/LIME_08_keV_Sat_NewCode_Iso_RandZ' (do not include the bucket nor the file name) 
'vignetteCorr'          : True,                    # apply vignetting correction (correction maps in data/ according to the geometry)
'environment_variables' : True,                    # if True the environment variables are added to the Tree

'excImages'             : [], #list(range(5))+[],      # To exlude some images of the analysis. Always exclude the first 5 which are messy (not true anymore)
'donotremove'           : True,                   # Remove or not the file from the tmp folder

'scfullinfo'            : True, 			   # If True some the supercluster pixels info will be saved
'save_MC_data'          : False,			   # If True save the MC informations

'tip'                   : '3D',
'saturation_corr'       : False,

# Superclusters parameters are hardcoded
'calibrate_clusters'    : False,

# Run the cosmic killer (linear track extrapolation)
'cosmic_killer'         : False,

### PMT waveform reconstruction
'pmt_mode'              : 1,

'board_pmt_channels'	: [1,2,3,4],	# Board channels used to save PMT.

'threshold'             : 0,			
'height_RMS'		: 5,			## 5 * RMS
'minPeakDistance'       : 1,			
'prominence'            : 0.1,			
'fixed_prom'		: True,			## If True, overrides prominence value with optimized one
'width'                 : 5,
'resample'              : 10,			## Number of samples used for moving average
'pmt_plotpy'            : True,		## saves plots in a folder called './waveforms'. The user must create this folder manually.
'pmt_wf_in_tree'        : False,		## saves full X and Y arrays in tree branches. 
'pmt_verbose'		: 0	                ## '0' for no output; '3' for full output.			
}

##########Geometry##########
{
# LIME
'name'        : 'lime',
'pixelwidth'  : 0.152,  # mm
'npixx'       : 2304,
'vignette'    : 'data/vignette_runs03930to03932.root',
'xmin'        : 0,
'xmax'        : 2304,
'ymin'        : 304,
'ymax'        : 2304-250,
}

##########Clustering##########
{

## DBSCAN seeding
'dim'                : '3D',
'dbscan_eps'         : 12,
'dbscan_minsamples'  : 20, # this is for 2D #

## directional clustering
'dir_radius'         : 28, #11.5
'dir_min_accuracy'   : 0.95, # minimum accuracy of the RANSAC to save one point of the cluster for the directional search
'dir_minsamples'     : 12, ## 11 OKish ## N.B. this is always 2D, and it may differ from dbscan_minsamples (that can be Npix * intensity for 3D)
'dir_thickness'      : 6.5,    ## 5.5,
'time_threshold'     : 300, # seconds
'max_attempts'       : 3,
'isolation_radius'   : 5,
'metric'             : 'cityblock', # this is fundamental not to be "euclidean", in order not to merge close and long tracks
'metric_params'      : None,
'algorithm'          : 'auto',
'leaf_size'          : 30,
'p'                  : None,
'n_jobs'             : None,
'expand_noncore'     : True,
}

##########Environment##########
{
'humidity': 'P1UIn5',
'lime_pressure': 'P0IIn5',
'atm_pressure': 'P0IIn3',
'lime_temperature': 'P0IIn0',
'atm_temperature': 'P1UIn1',
'mixture_density' : 'P3IIn6',
}
##########Reco_content##########
{

'scfullinfo'            : True,			   # If True some the supercluster pixels info will be saved
'scpixels_sel'          :  {                               # To reduce the event content when saving the pixels
                           'max_len' : 100000,  # remove completely this cut (output files might be much larger)
                           'min_integral' : 850 # corresponding to about 0.5 keV with the Run3 typical scale
                           },

'save_MC_data'          : False,			   # If True save the MC informations

}
